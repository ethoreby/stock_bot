'use strict';

/**
 * @ngdoc service
 * @name stockBotApp.financialsService
 * @description
 * # financialsService
 * Factory in the stockBotApp.
 */
angular.module('stockBotApp')
  .factory('financialsService', function ($http, ApiKey, $q) {

    var baseUrl = 'https://sec.kimonolabs.com/';
    var baseArgs = { apikey: ApiKey.key }

    var mock = {
      "data":[
        {
          "name":"10-K",
          "company_cik":"0000006201",
          "company_symbol":"AAL",
          "period":"ann",
          "year":2014,
          "quarter":4,
          "usdconversionrate":"1.00",
          "restated":false,
          "receiveddate":"2/25/2015",
          "preliminary":false,
          "periodlengthcode":"m",
          "periodlength":12,
          "periodenddate":"12/31/2014",
          "original":true,
          "dcn":"0001193125-15-061145",
          "currencycode":"USD",
          "crosscalculated":false,
          "audited":true,
          "amended":false,
          "changeincurrentassets":"-205000000",
          "changeincurrentliabilities":"-1026000000",
          "changeininventories":null,
          "dividendspaid":"-144000000",
          "effectofexchangerateoncash":null,
          "capitalexpenditures":"-5311000000",
          "cashfromfinancingactivities":"-315000000",
          "cashfrominvestingactivities":"-2911000000",
          "cashfromoperatingactivities":"3080000000",
          "cfdepreciationamortization":"1342000000",
          "changeinaccountsreceivable":"-160000000",
          "investmentchangesnet":"1799000000",
          "netchangeincash":"-146000000",
          "totaladjustments":"198000000",
          "ebit":"4249000000",
          "costofrevenue":"15620000000",
          "discontinuedoperations":null,
          "equityearnings":null,
          "accountingchange":null,
          "extraordinaryitems":"0",
          "grossprofit":"27030000000",
          "incomebeforetaxes":"3212000000",
          "interestexpense":"-887000000",
          "netincome":"2882000000",
          "netincomeapplicabletocommon":"2882000000",
          "researchdevelopmentexpense":null,
          "totalrevenue":"42650000000",
          "sellinggeneraladministrativeexpenses":"10052000000",
          "commonstock":"7000000",
          "deferredcharges":null,
          "cashandcashequivalents":"994000000",
          "cashcashequivalentsandshortterminvestments":"8077000000",
          "goodwill":"4091000000",
          "intangibleassets":"2240000000",
          "inventoriesnet":"1004000000",
          "minorityinterest":null,
          "otherassets":"2244000000",
          "othercurrentassets":null,
          "othercurrentliabilities":"7059000000",
          "otherequity":null,
          "otherliabilities":"3728000000",
          "preferredstock":null,
          "propertyplantequipmentnet":"23084000000",
          "retainedearnings":"-8562000000",
          "totalassets":"43771000000",
          "totalcurrentassets":"12112000000",
          "totalcurrentliabilities":"13435000000",
          "totalliabilities":"41750000000",
          "totallongtermdebt":"16196000000",
          "totalreceivablesnet":"1771000000",
          "totalshorttermdebt":"1708000000",
          "totalstockholdersequity":"2021000000",
          "treasurystock":null,
          "created_at":"2015-04-24T01:00:10.325Z",
          "updated_at":"2015-04-24T01:00:10.325Z"
        },
        {
          "name":"10-K",
          "company_cik":"0000006201",
          "company_symbol":"AAL",
          "period":"ann",
          "year":2013,
          "quarter":4,
          "usdconversionrate":"1.00",
          "restated":false,
          "receiveddate":"2/25/2015",
          "preliminary":false,
          "periodlengthcode":"m",
          "periodlength":12,
          "periodenddate":"12/31/2013",
          "original":false,
          "dcn":"0001193125-15-061145",
          "currencycode":"USD",
          "crosscalculated":false,
          "audited":true,
          "amended":false,
          "changeincurrentassets":"-122000000",
          "changeincurrentliabilities":"-235000000",
          "changeininventories":null,
          "dividendspaid":"0",
          "effectofexchangerateoncash":null,
          "capitalexpenditures":"-3114000000",
          "cashfromfinancingactivities":"3799000000",
          "cashfrominvestingactivities":"-3814000000",
          "cashfromoperatingactivities":"675000000",
          "cfdepreciationamortization":"1020000000",
          "changeinaccountsreceivable":"-93000000",
          "investmentchangesnet":"-1181000000",
          "netchangeincash":"660000000",
          "totaladjustments":"2509000000",
          "ebit":"1399000000",
          "costofrevenue":"11019000000",
          "discontinuedoperations":null,
          "equityearnings":null,
          "accountingchange":null,
          "extraordinaryitems":"-2655000000",
          "grossprofit":"15724000000",
          "incomebeforetaxes":"475000000",
          "interestexpense":"-856000000",
          "netincome":"-1834000000",
          "netincomeapplicabletocommon":"-1834000000",
          "researchdevelopmentexpense":null,
          "totalrevenue":"26743000000",
          "sellinggeneraladministrativeexpenses":"6618000000",
          "commonstock":"5000000",
          "deferredcharges":null,
          "cashandcashequivalents":"1140000000",
          "cashcashequivalentsandshortterminvestments":"10286000000",
          "goodwill":"4086000000",
          "intangibleassets":"2311000000",
          "inventoriesnet":"1012000000",
          "minorityinterest":null,
          "otherassets":"2299000000",
          "othercurrentassets":null,
          "othercurrentliabilities":"7385000000",
          "otherequity":null,
          "otherliabilities":"9087000000",
          "preferredstock":null,
          "propertyplantequipmentnet":"19259000000",
          "retainedearnings":"-11296000000",
          "totalassets":"42278000000",
          "totalcurrentassets":"14323000000",
          "totalcurrentliabilities":"13806000000",
          "totalliabilities":"45009000000",
          "totallongtermdebt":"15353000000",
          "totalreceivablesnet":"1560000000",
          "totalshorttermdebt":"1446000000",
          "totalstockholdersequity":"-2731000000",
          "treasurystock":null,
          "created_at":"2015-04-24T01:00:10.325Z",
          "updated_at":"2015-04-24T01:00:10.325Z"
        },
        {
          "name":"10-K",
          "company_cik":"0000006201",
          "company_symbol":"AAL",
          "period":"ann",
          "year":2012,
          "quarter":4,
          "usdconversionrate":"1.00",
          "restated":false,
          "receiveddate":"2/25/2015",
          "preliminary":false,
          "periodlengthcode":"m",
          "periodlength":12,
          "periodenddate":"12/31/2012",
          "original":false,
          "dcn":"0001193125-15-061145",
          "currencycode":"USD",
          "crosscalculated":false,
          "audited":true,
          "amended":false,
          "changeincurrentassets":"-355000000",
          "changeincurrentliabilities":"473000000",
          "changeininventories":null,
          "dividendspaid":"0",
          "effectofexchangerateoncash":null,
          "capitalexpenditures":"-1888000000",
          "cashfromfinancingactivities":"483000000",
          "cashfrominvestingactivities":"-1571000000",
          "cashfromoperatingactivities":"1285000000",
          "cfdepreciationamortization":"1001000000",
          "changeinaccountsreceivable":"-222000000",
          "investmentchangesnet":"306000000",
          "netchangeincash":"197000000",
          "totaladjustments":"3161000000",
          "ebit":"148000000",
          "costofrevenue":"10499000000",
          "discontinuedoperations":null,
          "equityearnings":null,
          "accountingchange":null,
          "extraordinaryitems":"-2208000000",
          "grossprofit":"14356000000",
          "incomebeforetaxes":"-237000000",
          "interestexpense":"-632000000",
          "netincome":"-1876000000",
          "netincomeapplicabletocommon":"-1876000000",
          "researchdevelopmentexpense":null,
          "totalrevenue":"24855000000",
          "sellinggeneraladministrativeexpenses":"7275000000",
          "commonstock":"127000000",
          "deferredcharges":null,
          "cashandcashequivalents":"480000000",
          "cashcashequivalentsandshortterminvestments":"4742000000",
          "goodwill":"0",
          "intangibleassets":"869000000",
          "inventoriesnet":"580000000",
          "minorityinterest":null,
          "otherassets":"2167000000",
          "othercurrentassets":null,
          "othercurrentliabilities":"4524000000",
          "otherequity":null,
          "otherliabilities":"1761000000",
          "preferredstock":null,
          "propertyplantequipmentnet":"13402000000",
          "retainedearnings":"-9462000000",
          "totalassets":"23510000000",
          "totalcurrentassets":"7072000000",
          "totalcurrentliabilities":"9011000000",
          "totalliabilities":"24891000000",
          "totallongtermdebt":"7116000000",
          "totalreceivablesnet":"1124000000",
          "totalshorttermdebt":"1419000000",
          "totalstockholdersequity":"-7987000000",
          "treasurystock":"-367000000",
          "created_at":"2015-04-24T01:00:10.325Z",
          "updated_at":"2015-04-24T01:00:10.325Z"
        },
        {
          "name":"10-K",
          "company_cik":"0000006201",
          "company_symbol":"AAL",
          "period":"ann",
          "year":2011,
          "quarter":4,
          "usdconversionrate":"1.00",
          "restated":false,
          "receiveddate":"2/28/2014",
          "preliminary":false,
          "periodlengthcode":"m",
          "periodlength":12,
          "periodenddate":"12/31/2011",
          "original":false,
          "dcn":"0000006201-14-000004",
          "currencycode":"USD",
          "crosscalculated":false,
          "audited":true,
          "amended":false,
          "changeincurrentassets":"-310000000",
          "changeincurrentliabilities":"756000000",
          "changeininventories":null,
          "dividendspaid":null,
          "effectofexchangerateoncash":null,
          "capitalexpenditures":"-1610000000",
          "cashfromfinancingactivities":"664000000",
          "cashfrominvestingactivities":"-1292000000",
          "cashfromoperatingactivities":"743000000",
          "cfdepreciationamortization":"1086000000",
          "changeinaccountsreceivable":"-164000000",
          "investmentchangesnet":"610000000",
          "netchangeincash":"115000000",
          "totaladjustments":"2722000000",
          "ebit":"-1037000000",
          "costofrevenue":"10236000000",
          "discontinuedoperations":null,
          "equityearnings":null,
          "accountingchange":null,
          "extraordinaryitems":"-118000000",
          "grossprofit":"13743000000",
          "incomebeforetaxes":"-1861000000",
          "interestexpense":"-811000000",
          "netincome":"-1979000000",
          "netincomeapplicabletocommon":"-1979000000",
          "researchdevelopmentexpense":null,
          "totalrevenue":"23979000000",
          "sellinggeneraladministrativeexpenses":"7463000000",
          "commonstock":"341000000",
          "deferredcharges":null,
          "cashandcashequivalents":"283000000",
          "cashcashequivalentsandshortterminvestments":"4739000000",
          "goodwill":null,
          "intangibleassets":null,
          "inventoriesnet":"617000000",
          "minorityinterest":null,
          "otherassets":"2284000000",
          "othercurrentassets":"499000000",
          "othercurrentliabilities":"4223000000",
          "otherequity":null,
          "otherliabilities":"1470000000",
          "preferredstock":"0",
          "propertyplantequipmentnet":"13913000000",
          "retainedearnings":"-7586000000",
          "totalassets":"23848000000",
          "totalcurrentassets":"6757000000",
          "totalcurrentliabilities":"8630000000",
          "totalliabilities":"26116000000",
          "totallongtermdebt":"6702000000",
          "totalreceivablesnet":"902000000",
          "totalshorttermdebt":"1518000000",
          "totalstockholdersequity":"-7111000000",
          "treasurystock":"-367000000",
          "created_at":"2015-04-24T01:00:10.325Z",
          "updated_at":"2015-04-24T01:00:10.325Z"
        }
      ],
      "status":200,
      "config":{
        "method":"GET",
        "transformRequest":[
          null
        ],
        "transformResponse":[
          null
        ],
        "apikey":"xW6NRtK4m9R2D3UylhCVEcbpWWdLPlBO",
        "url":"https://sec.kimonolabs.com/companies/AAL/forms/10-K/ANN",
        "headers":{
          "Accept":"application/json, text/plain, */*"
        }
      },
      "statusText":"OK"
    };

    return {
      // getFinancials: function(symbol) {
      //   symbol = symbol.toUpperCase();
      //   return $http.get(baseUrl + 'companies/' + symbol + '/forms/10-K/ANN', baseArgs);
      // }

      getFinancials: function(symbol) {
        var deferred = $q.defer();
        deferred.resolve(mock);
        return deferred.promise;
      }
    };
  });
